<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>项目介绍 &mdash; 基于loongarch64的一个小型操作系统实验（改编自北航mos操作系统） V1.0 文档</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=b01b2dd9" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=9c3e77be" />
      <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=3f0bcac8"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=f281be69"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="_static/togglebutton.js?v=1ae7504c"></script>
        <script src="_static/translations.js?v=beaddf03"></script>
        <script src="_static/design-tabs.js?v=f930bc37"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <img src="_static/logo.svg" class="logo" alt="Logo"/>
          <a href="index.html" class="icon icon-home">
            基于loongarch64的一个小型操作系统实验（改编自北航mos操作系统）
          </a>
              <div class="version">
                V1.0
              </div>
<div role="search">
  <form id="evas-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="la64.html">1. 引言</a><ul>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id2">1.1. 引言</a></li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id3">1.2. 实验内容</a></li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id4">1.3. 实验设计</a></li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id5">1.4. 实验环境配置</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id6">1.4.1. 虚拟机平台以及镜像</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id7">1.4.2. 交叉编译器</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#loongarch64">1.4.3. loongarch64仿真器</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="la64.html#printf">2. 实验一：内核、启动和printf</a><ul>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id8">2.1. 实验目的</a></li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id9">2.2. 操作系统的启动</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id10">2.2.1. 硬件模拟器</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id11">2.2.2. 硬件模拟器的启动流程</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id12">2.3. 内核，启动！</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#makefile">2.3.1. Makefile—内核代码的地图</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#elf">2.3.2. ELF—操作系统内核的本质</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#linkerscript">2.3.3. LinkerScript—控制内核加载地址</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#start">2.3.4. _start—程序执行的第一条指令</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#printk">2.4. 实战printk</a></li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id13">2.5. 实验一正确结果</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="la64.html#id14">3. 实验二：内存管理</a><ul>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id15">3.1. 实验目的</a></li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id16">3.2. loongarch64的访存流程</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#cpu">3.2.1. CPU发出地址</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id17">3.2.2. 虚拟地址映射到物理地址</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id18">3.3. 内核程序启动</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#la32r-detect-memory">3.3.1. la32r_detect_memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#la32r-vm-init">3.3.2. la32r_vm_init</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id19">3.4. 物理内存管理</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id20">3.4.1. 链表宏</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id21">3.4.2. 页控制块</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id22">3.4.3. 其他相关函数</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id23">3.4.4. 实验结果展示</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id24">3.5. 虚拟内存管理</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id25">3.5.1. 二级页表结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id26">3.5.2. 与页表相关的函数</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#tlb">3.6. 访问内存与TLB重填</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id27">3.6.1. TLB相关的前置知识</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id28">3.6.2. TLB维护流程</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id29">3.7. 实验正确结果</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id30">3.7.1. 实验代码功能解释</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id31">3.7.2. 正确实验结果展示</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="la64.html#id32">4. 实验三：进程与异常</a><ul>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id33">4.1. 实验目的</a></li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id34">4.2. 进程</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id35">4.2.1. 进程控制块</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id36">4.2.2. 段地址映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id37">4.2.3. 进程的标识</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id38">4.2.4. 设置进程控制块</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id39">4.2.5. 加载二进制镜像</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id40">4.2.6. 创建进程</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id41">4.2.7. 进程运行与切换</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id42">4.2.8. 实验正确结果</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id43">4.3. 中断与例外</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id44">4.3.1. 例外的分发</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id45">4.3.2. 例外向量组</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id46">4.3.3. 时钟中断</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id47">4.3.4. 进程调度</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id48">4.4. 代码导读</a></li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id49">4.5. 实验正确结果</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="la64.html#fork">5. 实验四：系统调用与FORK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id50">5.1. 实验目的</a></li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#system-call">5.2. 系统调用(System Call)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id51">5.2.1. 用户态与内核态</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id52">5.2.2. 系统调用实例</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id53">5.2.3. 系统调用机制的实现</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id54">5.2.4. 基础系统调用函数</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#ipc">5.3. 进程间通信机制(IPC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id55">5.4. Fork</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id56">5.4.1. 初窥 fork</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id57">5.4.2. 写时复制机制</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id58">5.4.3. fork 的返回值</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id59">5.4.4. 地址空间的准备</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id60">5.4.5. 页写入异常</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id61">5.5. 实验正确结果</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="la64.html#id62">6. 实验五：文件系统</a><ul>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id63">6.1. 实验目的</a></li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id64">6.2. 文件系统概述</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id65">6.2.1. 文件系统的设计与实现</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#ide">6.3. IDE 磁盘驱动</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#i-o-mmio">6.3.1. 内存映射 I/O (MMIO)</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id66">6.3.2. IDE 磁盘</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id67">6.3.3. 驱动程序编写</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id68">6.4. 文件系统结构</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id69">6.4.1. 磁盘文件系统布局</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id70">6.4.2. 文件系统详细结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id71">6.4.3. 块缓存</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id72">6.5. 文件系统的用户接口</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id73">6.5.1. 文件描述符</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id74">6.5.2. 文件系统服务</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id75">6.6. 实验结果展示</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id76">6.6.1. IDE 磁盘交互</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id77">6.6.2. 文件系统测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id78">6.6.3. 文件系统服务测试</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="la64.html#shell">7. 实验六：管道与 SHELL</a><ul>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id79">7.1. 实验目的</a></li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id80">7.2. 管道</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id81">7.2.1. 初窥管道</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#la64-pipe">7.2.2. la64 中 pipe 的使用与实现</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id82">7.2.3. 管道关闭的正确判断</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id83">7.2.4. 相关函数</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id84">7.3. shell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#spawn">7.3.1. 学习 spawn 函数</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id85">7.3.2. 解释 shell 命令</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id86">7.3.3. 相关函数</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="la64.html#id87">7.4. 实验正确结果</a><ul>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id88">7.4.1. 管道测试</a></li>
<li class="toctree-l3"><a class="reference internal" href="la64.html#id89">7.4.2. shell 测试</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">基于loongarch64的一个小型操作系统实验（改编自北航mos操作系统）</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">项目介绍</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1>项目介绍<a class="headerlink" href="#id1" title="Link to this heading"></a></h1>
<p>Sphinx EVAS Theme是一个为企业文档标准化而构建的sphinx主题，支持html，word和pdf标准渲染输出。</p>
<p><strong>项目亮点</strong>:</p>
<ul class="simple">
<li><p>简化了文档构建过程,用户只需关注文档内容而无需关心复杂配置</p></li>
<li><p>提供了美观、符合企业标准的HTML、PDF和Word渲染输出样式</p></li>
<li><p>针对PDF输出优化了LaTeX模板和封面样式,美化了PDF渲染效果</p></li>
<li><p>嵌入了适合打印美观的免费商用中文(SourceHanSansSC)和英文字体(DejaVuSans)</p></li>
<li><p>新增了Word输出模板和构建命令,实现Word输出与PDF保持一致样式</p></li>
<li><p>引入了常用的Sphinx扩展作为默认配置,减少用户配置工作</p></li>
<li><p>提供了evas命令快速初始化文档项目模板,make命令进行编译构建</p></li>
<li><p>所有配置参数均有中文注释说明,降低了使用门槛</p></li>
</ul>
<p>本主题是基于sphinx_rtd_theme作为基础主题构建，做出了如下修改：</p>
<ul class="simple">
<li><p>新增latex导言和封面的模板，美化了PDF渲染样式</p></li>
<li><p>嵌入了适合打印美观的免费商用中英文字体</p></li>
<li><p>简化了PDF构建过程，由make latexpdf命令更改为make pdf命令</p></li>
<li><p>新增word模板和构建命令，美化了word渲染样式，样式保持与PDF基本一致</p></li>
<li><p>新增make all命令，以及环境检查</p></li>
<li><p>简化conf.py配置过程，只需要更改文档内容信息即可</p></li>
<li><p>引入常用的sphinx扩展(默认)</p></li>
</ul>
<blockquote>
<div><p>具体的配置参数在evas命令生成的项目模板source/conf.py文件中，每个配置参数均已中文注释详细说明。</p>
</div></blockquote>
<p>用户通过简单的命令即可实现项目文档模板初始化(evas命令，取代sphinx-quickstart)、文档构建(make html, make docx, make pdf以及make all)工作。</p>
<a class="bg-primary reference internal image-reference" href="_static/flow.png"><img alt="_static/flow.png" class="bg-primary" src="_static/flow.png" />
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">/home/eason/Documents/la64/source/README.md</span>, line 0)</p>
<p>Cannot scale image!
  Could not get size from &quot;_static/flow.png&quot;:
  [Errno 2] No such file or directory: '_static/flow.png'</p>
</aside>
</a>
<section id="id2">
<h2>项目参考<a class="headerlink" href="#id2" title="Link to this heading"></a></h2>
<p>感谢下列开源项目为本项目提供支持</p>
<p><a class="reference external" href="https://github.com/sphinx-doc/sphinx">sphinx：开源文档构建工具</a></p>
<p><a class="reference external" href="https://github.com/readthedocs/sphinx_rtd_theme">sphinx_rtd_theme：使用最为广泛的Sphinx主题</a></p>
<p><a class="reference external" href="https://github.com/espressif/sphinx_idf_theme">sphinx_idf_theme：乐鑫科技的Sphinx主题</a></p>
<p><a class="reference external" href="https://github.com/executablebooks/sphinx-jupyterbook-latex">sphinx-jupyterbook-latex：支持LaTeX 输出的Sphinx扩展</a></p>
<p><a class="reference external" href="https://github.com/espressif/esp-docs">esp-docs：乐鑫科技基于Sphinx开源文档构建环境</a></p>
</section>
<section id="id3">
<h2>效果预览<a class="headerlink" href="#id3" title="Link to this heading"></a></h2>
<p>HTML显示效果</p>
<a class="bg-primary reference internal image-reference" href="_static/html_preview1.jpg"><img alt="_static/html_preview1.jpg" class="bg-primary align-center" src="_static/html_preview1.jpg" />
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">/home/eason/Documents/la64/source/README.md</span>, line 0)</p>
<p>Cannot scale image!
  Could not get size from &quot;_static/html_preview1.jpg&quot;:
  [Errno 2] No such file or directory: '_static/html_preview1.jpg'</p>
</aside>
</a>
<a class="bg-primary reference internal image-reference" href="_static/html_preview2.jpg"><img alt="_static/html_preview2.jpg" class="bg-primary align-center" src="_static/html_preview2.jpg" />
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">/home/eason/Documents/la64/source/README.md</span>, line 0)</p>
<p>Cannot scale image!
  Could not get size from &quot;_static/html_preview2.jpg&quot;:
  [Errno 2] No such file or directory: '_static/html_preview2.jpg'</p>
</aside>
</a>
<p>PDF显示效果</p>
<a class="bg-primary reference internal image-reference" href="_static/pdf_preview.jpg"><img alt="_static/pdf_preview.jpg" class="bg-primary align-center" src="_static/pdf_preview.jpg" />
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">/home/eason/Documents/la64/source/README.md</span>, line 0)</p>
<p>Cannot scale image!
  Could not get size from &quot;_static/pdf_preview.jpg&quot;:
  [Errno 2] No such file or directory: '_static/pdf_preview.jpg'</p>
</aside>
</a>
</section>
<section id="id4">
<h2>环境准备<a class="headerlink" href="#id4" title="Link to this heading"></a></h2>
<p>sphinx_evas_theme支持在windows和linux环境下构建文档，目前已在windows 11以及ubuntu 22.04上进行了测试。</p>
<p>sphinx_evas_theme在windows下需要安装python, perl, xelatex以及latexmk。</p>
<p>sphinx_evas_theme是基于sphinx创建的主题，而sphinx本身是一个python脚本/库，所以先需要安装python，建议版本为3.7以上。</p>
<p>具体python的安装方式请参考官网以及其他教程，python安装完后会自动将python根目录以及Scripts目录添加到path系统环境变量中：</p>
<ul class="simple">
<li><p>python官网：<a class="reference external" href="https://www.python.org">https://www.python.org</a></p></li>
</ul>
<p>在构建pdf时，由于sphinx使用了latex语言作为中间语言，而编译latex需要latex编译环境，推荐安装texlive完整版。</p>
<ul class="simple">
<li><p>Texlive 2024 (Windows)下载地址：<br />
<a class="reference external" href="https://mirrors.tuna.tsinghua.edu.cn/CTAN/systems/texlive/Images/">https://mirrors.tuna.tsinghua.edu.cn/CTAN/systems/texlive/Images/</a></p></li>
<li><p>Texlive和python3在ubuntu环境一键安装命令:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python3<span class="w"> </span>python-is-python3<span class="w"> </span>latexmk<span class="w"> </span>texlive-latex-recommended<span class="w"> </span>texlive-fonts-recommended<span class="w"> </span>texlive-xetex<span class="w"> </span>fonts-freefont-otf<span class="w"> </span>fonts-lmodern<span class="w"> </span>texlive-lang-chinese
</pre></div>
</div>
<ul class="simple">
<li><p>Linux环境下不需要安装perl</p></li>
</ul>
<p>由于Texlive自带了perl脚本环境，例如我的Texlive安装在了<code class="docutils literal notranslate"><span class="pre">C:\texlive</span></code>路径下，请将以下几个路径添加到windows path系统环境变量中：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">C:\texlive\tlpkg\tlperl\bin</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C:\texlive\bin\windows</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C:\texlive\texmf-dist</span></code></p></li>
</ul>
<a class="bg-primary reference internal image-reference" href="_static/path_env.jpg"><img alt="_static/path_env.jpg" class="bg-primary align-center" src="_static/path_env.jpg" />
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">/home/eason/Documents/la64/source/README.md</span>, line 0)</p>
<p>Cannot scale image!
  Could not get size from &quot;_static/path_env.jpg&quot;:
  [Errno 2] No such file or directory: '_static/path_env.jpg'</p>
</aside>
</a>
<p>在上述环境安装完成后，请在windows cmd命令行或者linux终端中运行如下几个命令，如果没有显示错误，则代表环境安装完毕</p>
<ul class="simple">
<li><p>python</p></li>
<li><p>xelatex</p></li>
<li><p>latexmk</p></li>
<li><p>perl (仅windows)</p></li>
</ul>
</section>
<section id="sphinx-evas-theme">
<h2>如何安装Sphinx EVAS Theme<a class="headerlink" href="#sphinx-evas-theme" title="Link to this heading"></a></h2>
<p>sphinx_evas_theme托管在<a class="reference external" href="https://pypi.org/">PyPI</a>中，通过python的pip安装：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">sphinx_evas_theme</span>
</pre></div>
</div>
<p>安装过程会将所有主题的依赖包一并安装。</p>
<section id="venv-python">
<h3>在venv python虚拟环境下安装<a class="headerlink" href="#venv-python" title="Link to this heading"></a></h3>
<p>在venv python虚拟环境下安装的命令如下，先新建一个空文件夹，然后在文件夹中输入：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">virtualenv</span>

<span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">venv</span> <span class="n">venv</span>

<span class="o">.</span>\<span class="n">venv</span>\<span class="n">Scripts</span>\<span class="n">activate</span><span class="o">.</span><span class="n">bat</span>   <span class="c1"># windows环境</span>

<span class="n">source</span> <span class="n">venv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>    <span class="c1"># linux环境</span>

<span class="n">pip</span> <span class="n">install</span> <span class="n">sphinx_evas_theme</span>
</pre></div>
</div>
</section>
</section>
<section id="id5">
<h2>如何使用<a class="headerlink" href="#id5" title="Link to this heading"></a></h2>
<p><strong>第一步</strong></p>
<p>本项目的使用非常简单，只需要在任意空文件夹下执行<code class="docutils literal notranslate"><span class="pre">evas</span></code>命令，即可创建项目模板</p>
<a class="bg-primary reference internal image-reference" href="_static/evas_init.jpg"><img alt="_static/evas_init.jpg" class="bg-primary align-center" src="_static/evas_init.jpg" />
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">/home/eason/Documents/la64/source/README.md</span>, line 0)</p>
<p>Cannot scale image!
  Could not get size from &quot;_static/evas_init.jpg&quot;:
  [Errno 2] No such file or directory: '_static/evas_init.jpg'</p>
</aside>
</a>
<p><strong>提示：</strong> 默认source目录下，除了index.rst和conf.py为必需，其他均为示例文件，可删除。</p>
<p><strong>第二步</strong></p>
<p>创建一个markdown文件，并将文件名添加到index.rst文件末尾。</p>
<p><strong>示例:</strong> 例如markdown文件为readme.md，则添加readme到index.rst文件末尾。</p>
<p><strong>第三步</strong></p>
<p>修改conf.py文件，填写标题、子标题、作者等信息</p>
<p><strong>第四步</strong></p>
<p>构建html、pdf、docx文档</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">evas</span>            <span class="c1"># 创建项目模板</span>

<span class="n">make</span> <span class="n">html</span>       <span class="c1"># 生成html网页，文件在_build/html路径下，index.html为入口</span>

<span class="n">make</span> <span class="n">docx</span>       <span class="c1"># 生成office word文档，文件在_build/docx路径下</span>

<span class="n">make</span> <span class="n">pdf</span>        <span class="c1"># 生成office pdf文档，文件在_build/pdf路径下</span>

<span class="n">make</span> <span class="nb">all</span>        <span class="c1"># 一次同时生成html, word, pdf</span>

<span class="n">make</span> <span class="n">clean</span>      <span class="c1"># 清空_build文件夹</span>

<span class="n">make</span> <span class="n">livehtml</span>   <span class="c1"># 编辑markdown时实时预览html网页</span>
</pre></div>
</div>
<blockquote>
<div><p>windows下每次执行make命令时会自动检查环境，如果python, perl, xelatex, latexmk均OK，则会根据命令参数构建对应文档，否则会直接中断</p>
</div></blockquote>
<a class="bg-primary reference internal image-reference" href="_static/env_check.jpg"><img alt="_static/env_check.jpg" class="bg-primary align-center" src="_static/env_check.jpg" />
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">/home/eason/Documents/la64/source/README.md</span>, line 0)</p>
<p>Cannot scale image!
  Could not get size from &quot;_static/env_check.jpg&quot;:
  [Errno 2] No such file or directory: '_static/env_check.jpg'</p>
</aside>
</a>
<blockquote>
<div><p>目前pdf封面左下角会显示evas版权信息，如果您需要修改，请自行fork此项目并在\sphinx_evas_theme\latex_templates\titlepage.tex 第45行修改版权信息</p>
</div></blockquote>
<section id="sphinx">
<h3>本项目引入了哪些Sphinx扩展？<a class="headerlink" href="#sphinx" title="Link to this heading"></a></h3>
<p>引入的扩展有：</p>
<ul class="simple">
<li><p>myst_parser</p></li>
<li><p>sphinx_markdown_tables</p></li>
<li><p>sphinx_markdown_checkbox</p></li>
<li><p>sphinx_copybutton</p></li>
<li><p>sphinx_design</p></li>
<li><p>sphinx.ext.intersphinx</p></li>
<li><p>sphinx.ext.autodoc</p></li>
<li><p>sphinx.ext.autosummary</p></li>
<li><p>sphinx.ext.mathjax</p></li>
<li><p>sphinx.ext.viewcode</p></li>
<li><p>sphinx.ext.githubpages</p></li>
<li><p>sphinx.ext.napoleon</p></li>
<li><p>sphinx_togglebutton</p></li>
<li><p>docxbuilder</p></li>
</ul>
</section>
<section id="id6">
<h3>文档编写语言<a class="headerlink" href="#id6" title="Link to this heading"></a></h3>
<p>Sphinx EVAS Theme已经默认开启了reStructuredText和Markdown支持</p>
<ul>
<li><p>如果你更倾向于使用Markdown，请遵循MyST Markdown，初始模板中已提供示例，使用其他Markdown语法可能会导致html，word或pdf内容缺失无法显示或者显示异常。</p>
<p>MyST Markdown语法请参考：https://mystmd.org/guide/typography</p>
</li>
<li><p>如果你更倾向于使用reStructuredText，请参考reStructuredText语法。</p></li>
</ul>
</section>
</section>
<section id="id7">
<h2>Sphinx EVAS Theme 目录结构<a class="headerlink" href="#id7" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sphinx_evas_theme
│
│
├───sphinx_evas_theme          # 主题主目录
│   ├───docx_templates         # 支持word文档输出，以及word模板文件
│   │
│   ├───latex_templates        # latex模板，包含导言和封面样式
│   │   └───fonts              # pdf字体文件
│   ├───locale                 # 国际化翻译，仅支持中文和英文
│   │
│   ├───static                 # html js, css, logo
│   │   ├───css                # html css样式
│   │   │   └───fonts          # html字体文件
│   │   └───js
│   └───templates              # 项目模板，详见下一章
│       └───source
│           ├───_static
│           └───_templates
│
└───tests                      # pytest 测试用例
</pre></div>
</div>
</section>
<section id="id8">
<h2>项目模板目录结构<a class="headerlink" href="#id8" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>├───source             # 文档内容存放目录
│   ├───_static        # 文档自定义html静态元素，如css,js存放目录，默认为空
│   └───_templates     # 文档自定义html模板，如自定义页眉页脚等，默认为空，详细请参考Sphinx教程
└───_build             # 构建目录，存放生成的文档
    ├───doctrees
    ├───docx           # word生成路径
    ├───html           # html生成路径
    ├───latex          # 构建pdf中生成的latex目录
    └───pdf            # pdf生成路径
</pre></div>
</div>
</section>
<section id="live-preview">
<h2>Live Preview 实时在线预览<a class="headerlink" href="#live-preview" title="Link to this heading"></a></h2>
<p>如果你想在编辑文档时实时查看更改后的html，不必每次都重新make html，然后打开html，可以使用如下命令：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">livehtml</span>
</pre></div>
</div>
<p>按照提示打开这个链接：http://127.0.0.1:8000</p>
<a class="bg-primary reference internal image-reference" href="_static/live_preview.jpg"><img alt="_static/live_preview.jpg" class="bg-primary align-center" src="_static/live_preview.jpg" />
<aside class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<span class="docutils literal">/home/eason/Documents/la64/source/README.md</span>, line 0)</p>
<p>Cannot scale image!
  Could not get size from &quot;_static/live_preview.jpg&quot;:
  [Errno 2] No such file or directory: '_static/live_preview.jpg'</p>
</aside>
</a>
<p>这样你在每次更改完markdown后，内容都会直接呈现在html网页中。</p>
<blockquote>
<div><p>如果你使用的是VS Code进行MyST Markdown编写，强烈建议安装MyST-Markdown扩展，它支持语法高亮、实时预览</p>
</div></blockquote>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr />

  <div role="contentinfo">
    <p>&#169; 版权所有 龙芯实验室.
      <span class="lastupdated">最后更新于 2026年1月28日 11:21:44.
      </span>

      <!-- 
      <span class="footer-aside">
        <a href="./基于loongarch64的一个小型操作系统实验（改编自北航mos操作系统）.pdf" class="fa fa-file-pdf-o">&nbsp下载 PDF</a>
      </span>
       -->
    </p>
  </div> 

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>